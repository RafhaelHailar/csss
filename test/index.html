<script type="test">
  import { toCss } from "../lib/Xengine.js";

  (function happyTest() {
    const res = [];
    for (let el of document.body.querySelectorAll('[class*="$"]'))
      for (let clazz of el.classList)
        if (clazz.includes("$"))
          try {
            res.push(toCss(clazz));
          } catch (er) { }
    document.querySelector('style').textContent = res.join('\n');
  })();
</script>

<script type="module">
  for (let file of ["HappyPath.html"])
    document.body.insertAdjacentHTML('beforeend', await(await fetch(file)).text());
  const happy = document.querySelector('script[type="test"]').outerHTML;
  for (let test of document.querySelectorAll("test-html")) {
    test.querySelector('style').setAttribute("expected", "");
    test.insertAdjacentHTML('beforeend', happy);
  }

  // import("http://localhost:3004/TestHTMLexpected.js");
  import("https://cdn.jsdelivr.net/gh/orstavik/TestHTML@v1.2.2/TestHTMLexpected.js");
</script>