<style>
  main {
    background: var(--grey-98);
    width: 100%;
    height: 100%;
    margin: 0;
    padding: 0;
  }

  div {
    background: var(--background-color);
  }

  span {
    display: inline-block;
    height: 2rem;
    margin: 2px;
    padding: 10px;
    background: var(--background-color);
    /* border: 1px solid black; */
  }
</style>
<main class="$palette(#34ad88)"></main>
<script>
  const names = "primary|secondary|tertiary|neutral|grey|error|warning|success|info";
  const types = "|-box|-flip|-darkflip|-pop|-pp";
  const str = [];
  for (const type of types.split("|")) {
    for (const name of names.split("|"))
      str.push(`<span class="$color(${name}${type})"> hello sunshine </span>`);
    str.push("<hr>");
  }
  document.querySelector("main").insertAdjacentHTML("beforeend", str.join("\n"));
</script>

</main>

<script type="module">
  import { toCss } from "../src/engine.js";

  (function happyTest() {
    const res = [];
    for (let el of document.body.querySelectorAll('[class*="$"]'))
      for (let clazz of el.classList)
        if (clazz.includes("$"))
          try {
            res.push(toCss(clazz));
          } catch (er) {
            console.log(er);
          }
    document.querySelector('style').textContent += res.join('\n');
  })();
</script>