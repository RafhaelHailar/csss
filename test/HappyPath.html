<test-html title="border+color+items">
  <div class="
  $palette(#ec1221)
  
  $border(solid,2px)
  |*$border(double,2px,radius(0.25rem))
  |.new$border(solid,4px,radius(1rem))
  |.sale$border(dashed,3px,radius(0.5rem))
                        
 $color(grey-text)
  |*$color(primary)
  |.new$color(secondary)
  |.sale$color(tertiary)
           ">

    <div class="new">New Arrival: Product 1</div>
    <div class="sale $h(300px) $w(600px) $border(r(10px,30px,60px))">On Sale: Product 2</div>
    <div>Product 3</div>
    <div class="sale">On Sale: Product 4</div>
    <div class="new">New Arrival: Product 5</div>
  </div>
  <style>
    @layer container, items;

    @layer container {
      .\$palette\(\#ec1221\) {
        --palette-primary: #ec1221;
        --palette-secondary: oklch(from #ec1221 50 c calc(h - 60));
        --palette-tertiary: oklch(from #ec1221 50 c calc(h + 60));
        --palette-neutral: oklch(from #ec1221 50 0.02 h);
        --palette-bw-fg: 0;
        --palette-bw-bg: 1;
        --palette-text-fg: 0.23;
        --palette-text-bg: 0.99;
        --palette-box-fg: 0.23;
        --palette-box-bg: 0.92;
        --palette-flip-fg: 0.99;
        --palette-flip-bg: 0.66;
        --palette-darkflip-fg: 0.9;
        --palette-darkflip-bg: 0.33;
        --palette-chroma: 0.23746015283192687;
        --palette-pop: calc(c * 2);
      }

      .\$border\(r\(10px\,30px\,60px\)\) {
        border-style: solid;
        border-radius: 10px 10px 60px 60px / 30px;
      }

      .\$w\(600px\) {
        inline-size: 600px;
      }

      .\$h\(300px\) {
        block-size: 300px;
      }

      .\$color\(grey-text\) {
        color: oklch(from grey var(--palette-text-fg) calc(c - (c * max(var(--palette-text-fg) - .8, 0) * 5)) h);
        --background-color: oklch(from grey var(--palette-text-bg) calc(c - (c * max(var(--palette-text-bg) - .8, 0) * 5)) h);
        border-color: color-mix(in oklch, oklch(from grey var(--palette-text-bg) calc(c - (c * max(var(--palette-text-bg) - .8, 0) * 5)) h), oklch(from grey var(--palette-text-fg) calc(c - (c * max(var(--palette-text-fg) - .8, 0) * 5)) h) 30%);
      }

      .\$border\(solid\,2px\) {
        border-style: solid;
        border-width: 2px;
      }
    }

    @layer items {
      .\|\*\$border\(double\,2px\,radius\(0\.25rem\)\)>* {
        border-style: double;
        border-width: 2px;
        border-radius: 0.25rem;
      }

      .\|\.sale\$color\(tertiary\)>.sale {
        color: oklch(from var(--palette-tertiary) var(--palette-text-fg) calc(c - (c * max(var(--palette-text-fg) - .8, 0) * 5)) h);
        --background-color: oklch(from var(--palette-tertiary) var(--palette-text-bg) calc(c - (c * max(var(--palette-text-bg) - .8, 0) * 5)) h);
        border-color: color-mix(in oklch, oklch(from var(--palette-tertiary) var(--palette-text-bg) calc(c - (c * max(var(--palette-text-bg) - .8, 0) * 5)) h), oklch(from var(--palette-tertiary) var(--palette-text-fg) calc(c - (c * max(var(--palette-text-fg) - .8, 0) * 5)) h) 30%);
      }

      .\|\.new\$color\(secondary\)>.new {
        color: oklch(from var(--palette-secondary) var(--palette-text-fg) calc(c - (c * max(var(--palette-text-fg) - .8, 0) * 5)) h);
        --background-color: oklch(from var(--palette-secondary) var(--palette-text-bg) calc(c - (c * max(var(--palette-text-bg) - .8, 0) * 5)) h);
        border-color: color-mix(in oklch, oklch(from var(--palette-secondary) var(--palette-text-bg) calc(c - (c * max(var(--palette-text-bg) - .8, 0) * 5)) h), oklch(from var(--palette-secondary) var(--palette-text-fg) calc(c - (c * max(var(--palette-text-fg) - .8, 0) * 5)) h) 30%);
      }

      .\|\*\$color\(primary\)>* {
        color: oklch(from var(--palette-primary) var(--palette-text-fg) calc(c - (c * max(var(--palette-text-fg) - .8, 0) * 5)) h);
        --background-color: oklch(from var(--palette-primary) var(--palette-text-bg) calc(c - (c * max(var(--palette-text-bg) - .8, 0) * 5)) h);
        border-color: color-mix(in oklch, oklch(from var(--palette-primary) var(--palette-text-bg) calc(c - (c * max(var(--palette-text-bg) - .8, 0) * 5)) h), oklch(from var(--palette-primary) var(--palette-text-fg) calc(c - (c * max(var(--palette-text-fg) - .8, 0) * 5)) h) 30%);
      }

      .\|\.sale\$border\(dashed\,3px\,radius\(0\.5rem\)\)>.sale {
        border-style: dashed;
        border-width: 3px;
        border-radius: 0.5rem;
      }

      .\|\.new\$border\(solid\,4px\,radius\(1rem\)\)>.new {
        border-style: solid;
        border-width: 4px;
        border-radius: 1rem;
      }
    }
  </style>
</test-html>
<test-html title="border-radius">
  <style>
    @layer container, items;

    @layer container {
      .\$border\(radius\(1rem\)\) {
        border-style: solid;
        border-radius: 1rem;
      }
    }

    @layer items {}
  </style>
  <div class="$border(radius(1rem))">hello</div>
</test-html>
<test-html title="big border">
  <div class="$border(w(,1px,2px,),s(,,solid,dashed))">sunshine</div>
  <style>
    @layer container, items;

    @layer container {
      .\$border\(w\(\,1px\,2px\,\)\,s\(\,\,solid\,dashed\)\) {
        border-inline-start-width: 1px;
        border-block-end-width: 2px;
        border-block-end-style: solid;
        border-inline-end-style: dashed;
      }
    }

    @layer items {}
  </style>
</test-html>
<test-html title="border-thin">
  <div class="$border(thin)">!!!</div>
  <style>
    @layer container, items;

    @layer container {
      .\$border\(thin\) {
        border-style: solid;
        border-width: thin;
      }
    }

    @layer items {}
  </style>
</test-html>
<test-html title="$color(oklch(green,.5,.85,h))">
  <div class="$color(oklch(green,.5,.85,h))">
    hello
  </div>
  <style>
    @layer container, items;

    @layer container {
      .\$color\(oklch\(green\,\.5\,\.85\,h\)\) {
        color: oklch(from oklch(from green .5 .85 h) var(--palette-text-fg) calc(c - (c * max(var(--palette-text-fg) - .8, 0) * 5)) h);
        --background-color: oklch(from oklch(from green .5 .85 h) var(--palette-text-bg) calc(c - (c * max(var(--palette-text-bg) - .8, 0) * 5)) h);
        border-color: color-mix(in oklch, oklch(from oklch(from green .5 .85 h) var(--palette-text-bg) calc(c - (c * max(var(--palette-text-bg) - .8, 0) * 5)) h), oklch(from oklch(from green .5 .85 h) var(--palette-text-fg) calc(c - (c * max(var(--palette-text-fg) - .8, 0) * 5)) h) 30%);
      }
    }

    @layer items {}
  </style>
</test-html>
<test-html title="color(3)">
  <style>
    @layer container, items;

    @layer container {

      /*$color(black,#123456)$color-border(red)*/
      /*$color(black,#123456)$color-border(red)*/
      :where(.\$color\(black\,\#123456\)\$color-border\(red\)) {
        color: black;
        --background-color: #123456;
        border-color: red;
      }

      @layer items {}
  </style>
  <div class="$color(black,#123456)$color-border(red)">
    hello
  </div>
</test-html>
<test-html title="color(3b)">
  <style>
    @layer container, items;

    @layer container {
      .\$color\(black\,\#123456\,green\) {
        color: black;
        --background-color: #123456;
        border-color: green;
      }
    }

    @layer items {}
  </style>
  <div class="$color(black,#123456,green)">
    hello
  </div>
</test-html>
<test-html title="$color(black,#123456,green:yellow)">
  <style>
    @layer container, items;

    @layer container {

      .\$color\(black\,\#123456\,green\:yellow\) {
        color: black;
        --background-color: #123456;
        border-block-color: green;
        border-inline-color: yellow;
      }
    }

    @layer items {}
  </style>
  <div class="$color(black,#123456,green:yellow)">
    hello
  </div>
</test-html>
<test-html title="$color(rgb(0,12,255,.6))">
  <div class="$color(rgb(0,12,255,.6))">
    hello
  </div>
  <style>
    @layer container {
      .\$color\(rgb\(0\,12\,255\,\.6\)\) {
        color: oklch(from rgba(0 12 255 / .6) var(--palette-text-fg) calc(c - (c * max(var(--palette-text-fg) - .8, 0) * 5)) h);
        --background-color: oklch(from rgba(0 12 255 / .6) var(--palette-text-bg) calc(c - (c * max(var(--palette-text-bg) - .8, 0) * 5)) h);
        border-color: color-mix(in oklch, oklch(from rgba(0 12 255 / .6) var(--palette-text-bg) calc(c - (c * max(var(--palette-text-bg) - .8, 0) * 5)) h), oklch(from rgba(0 12 255 / .6) var(--palette-text-fg) calc(c - (c * max(var(--palette-text-fg) - .8, 0) * 5)) h) 30%);
      }
    }

    @layer items {}

    @layer container, items;
  </style>
</test-html>
<test-html title="$w(min)">
  <div class="$w(min)">
    hello
  </div>
  <style>
    @layer container, items;

    @layer container {
      .\$w\(min\) {
        inline-size: min-content;
      }
    }

    @layer items {}
  </style>
</test-html>
<test-html title="$w(min,2px,max)">
  <style>
    @layer container, items;

    @layer container {

      .\$w\(min\,2px\,max\) {
        min-inline-size: min-content;
        inline-size: 2px;
        max-inline-size: max-content;
      }
    }

    @layer items {}
  </style>
  <div class="$w(min,2px,max)">
    hello
  </div>
</test-html>
<test-html title="$w(1px,2px,)">
  <style>
    @layer container, items;

    @layer container {
      .\$w\(1px\,2px\,\) {
        min-inline-size: 1px;
        inline-size: 2px;
      }
    }

    @layer items {}
  </style>
  <div class="$w(1px,2px,)">
    hello
  </div>
</test-html>
<test-html title="$h(,2px,)">
  <style>
    @layer container, items;

    @layer container {
      .\$h\(\,2px\,\) {
        block-size: 2px;
      }
    }

    @layer items {}
  </style>
  <div class="$h(,2px,)">
    hello
  </div>
</test-html>
<test-html title="$flex(row-reverse,p(1%,,3%),gap(,3rem))">
  <style>
    @layer container, items;

    @layer container {
      .\$flex\(row-reverse\,p\(1\%\,\,3\%\)\,gap\(\,3rem\)\) {
        display: flex;
        flex-direction: row-reverse;
        padding-block-start: 1%;
        padding-block-end: 3%;
        row-gap: 3rem;
      }
    }

    @layer items {}
  </style>
  <div class="$flex(row-reverse,p(1%,,3%),gap(,3rem))">
    hello
  </div>
</test-html>
<test-html title="$flex(...)|$_flex">
  <style>
    @layer container, items;

    @layer container {

      .\$flex\(gap\(4px\)\,padding\(22px\,33px\,44px\)\)\|\$_flex\(margin\(\,0\.1px\,\,20\%\)\) {
        display: flex;
        gap: 4px;
        padding-block-start: 22px;
        padding-inline: 33px;
        padding-block-end: 44px;
      }
    }

    @layer items {

      /*$flex(gap(4px),padding(22px,33px,44px))|$_flex(margin(,0.1px,,20%))*/
      :where(.\$flex\(gap\(4px\)\,padding\(22px\,33px\,44px\)\)\|\$_flex\(margin\(\,0\.1px\,\,20\%\)\))> :where(*) {
        margin-inline-start: 0.1px;
        margin-inline-end: 20%;
      }
  </style>
  <div class="$flex(gap(4px),padding(22px,33px,44px))|$_flex(margin(,0.1px,,20%))">
    hello
  </div>
</test-html>
<test-html title="$flex(cc)|*$_flex(margin(10px))">
  <style>
    @layer container, items;

    @layer container {

      /*$flex(cc)|*$_flex(margin(10px))*/
      :where(.\$flex\(cc\)\|\*\$_flex\(margin\(10px\)\)) {
        display: flex;
        align-content: center;
        justify-content: center;
      }
    }

    @layer items {

      /*$flex(cc)|*$_flex(margin(10px))*/
      :where(.\$flex\(cc\)\|\*\$_flex\(margin\(10px\)\))> :where(*) {
        margin: 10px;
      }
    }
  </style>
  <div class="$flex(cc)|*$_flex(margin(10px))">
    hello
  </div>
</test-html>
<test-html title="$flex(ellipsis)">
  <style>
    @layer container, items;

    @layer container {

      /*$flex(ellipsis)*/
      :where(.\$flex\(ellipsis\)) {
        display: flex;
        overflow-x: hidden;
        overflow-inline: hidden;
        overflow-y: hidden;
        overflow-block: hidden;
        text-overflow: ellipsis;
        white-space: nowrap;
      }
    }

    @layer items {}
  </style>
  <div class="$flex(ellipsis)">
    hello
  </div>
</test-html>
<test-html title="$flex|items">
  <style>
    @layer container, items;

    @layer container {
      .\$flex\(gap\(1rem\)\,visible-auto\,padding\(1rem\)\)\$w\(80\%\)\|\*\$_flex\(0shrink\,c\)\$w\(7rem\)\$h\(3rem\) {
        display: flex;
        gap: 1rem;
        overflow-x: auto;
        overflow-inline: auto;
        overflow-y: visible;
        overflow-block: visible;
        padding: 1rem;
        inline-size: 80%;
      }
    }

    @layer items {
      .\$flex\(gap\(1rem\)\,visible-auto\,padding\(1rem\)\)\$w\(80\%\)\|\*\$_flex\(0shrink\,c\)\$w\(7rem\)\$h\(3rem\)>* {
        flex-shrink: 0;
        align-self: center;
        inline-size: 7rem;
        block-size: 3rem;
      }
    }
  </style>
  <div class="
    $flex(gap(1rem),visible-auto,padding(1rem))$w(80%)|*$_flex(0shrink,c)$w(7rem)$h(3rem)">
    hello
  </div>
</test-html>
<test-html title="$cursor(pointer)">
  <div class="$cursor(pointer)">
    hello
  </div>
  <style>
    @layer container, items;

    @layer container {
      .\$cursor\(pointer\) {
        cursor: pointer;
      }
    }

    @layer items {}
  </style>
</test-html>
<test-html title="$cursor(ew-resize)">
  <div class="$cursor(ew-resize)">
    hello
  </div>
  <style>
    @layer container, items;

    @layer container {
      .\$cursor\(ew-resize\) {
        cursor: ew-resize;
      }
    }

    @layer items {}
  </style>
</test-html>
<test-html title="$translate(10px)$rotate(45deg)">
  <div class="$translate(10px)$rotate(45deg)">
    hello
  </div>
  <style>
    @layer container, items;

    @layer container {
      .\$translate\(10px\)\$rotate\(45deg\) {
        transform: translate(10px) rotate(45deg);
      }
    }

    @layer items {}
  </style>
</test-html>

<!-- <test-html title="@print:hover$border(solid,2px)|@screen:valid$border(dotted,2px)|.first$border(dashed,2px)">
  <div class="@print:hover$border(solid,2px)|@screen:valid$border(dotted,2px)|.first$border(dashed,2px)">
    hello
  </div>
  <style>
    @layer container, items;
    @layer container {
      @media print {
        .\@print\:hover\$border\(solid\,2px\)\|\@screen\:valid\$border\(dotted\,2px\)\|\.first\$border\(dashed\,2px\):where(:hover) {
          border-style: solid;
          border-width: 2px;
        }
      }
    }

    @layer items {
      @media print and (screen) {
        .\@print\:hover\$border\(solid\,2px\)\|\@screen\:valid\$border\(dotted\,2px\)\|\.first\$border\(dashed\,2px\):hover>:valid {
          border-style: dotted;
          border-width: 2px;
        }
      }
      .\@print\:hover\$border\(solid\,2px\)\|\@screen\:valid\$border\(dotted\,2px\)\|\.first\$border\(dashed\,2px\):hover>.first {
        border-style: dashed;
        border-width: 2px;
      }
    }
  </style>
</test-html> -->
<!-- <test-html title=":dark=@media(prefers-color-scheme:dark);">
  <div css=":dark=@media(prefers-color-scheme:dark);">
    <div class=":dark$w(10px)">
      hello
    </div>
  </div>
  <style>
      @layer items { }
</style>
</test-html> -->