<style>
  main {
    background: var(--grey-98);
    width: 100%;
    height: 100%;
    margin: 0;
    padding: 0;
  }

  div {
    background: var(--background-color);
  }

  span {
    display: inline-block;
    height: 2rem;
    margin: 2px;
    padding: 10px;
    background: var(--background-color);
    border-width: 3px;
    border-style: solid;
  }
</style>
<main class="$palette[#ff3412]"></main>
<script>
  const names = "secondary|primary|tertiary|neutral|grey|red-blend|orange-blend|green-blend|blue-blend";
  const types = "|-bw|-box|-flip|-darkflip|-pop-flip";
  const str = [];
  for (const type of types.split("|")) {
    for (const name of names.split("|"))
      str.push(`<span class="$color[${name}${type}]"> hello sunshine </span>`);
    str.push("<hr>");
  }
  document.querySelector("main").insertAdjacentHTML("beforeend", str.join("\n"));
</script>

</main>

<script type="module">
  import { toCss } from "../src/engine.js";

  (function happyTest() {
    const res = [];
    for (let el of document.body.querySelectorAll('[class*="$"]'))
      for (let clazz of el.classList)
        if (clazz.includes("$"))
          try {
            res.push(toCss(clazz));
          } catch (er) {
            console.log(er);
          }
    document.querySelector('style').textContent += res.join('\n');
  })();
</script>